description: Demographic information about the patient whose tests are retrieved.
type: object
required:
  - resourceType
  - identifier
  - birthDate
properties:
  resourceType: 
    description: FHIR resource type. Always `Observation`.
    type: string
    example: "Observation"  
  id: 
    description: FHIR resource id.
    type: string
    example: "ASD32145123"
  status: 
    description: COVID-19 test status. Always `final`.
    type: string
    example: "final"
  identifier:
    description: Unique identifier for this COVID-19 test result record, as generated by the source system.
    type: array
    minItems: 1
    maxItems: 1
    items:
      type: object
      required:
        - system
        - value
      properties:
        system:
          description: URI of the namespace of this identifier. Always `https://fhir.nhs.uk/Id/SpecimenId`.
          type: string
          example: "https://fhir.nhs.uk/Id/SpecimenId"
        value:
          description: Identifier value within `system`.
          type: string
          example: "ASD32145123"
  subject:
    description: The patient who took the COVID-19 test.
    type: object
    required:
      - reference
      - identifier
    properties:
      reference:
        description: URI for the associated Patient resource in the bundle.
        type: string
        example: "Patient/1234567890"
      type:
        description: Type of resource this reference refers to. Always `Patient`.
        type: string
        example: "Patient"
      identifier:
        description: Business identifier for linked Patient. Always an NHS number.
        type: object
        required:
          - system
          - value
        properties:
          system:
            description: URI of coding system used to identify linked patient.
            type: string
            example: "https://fhir.nhs.uk/Id/nhs-number"
          value:
            description: Value in coding system representing linked patient.
            type: string
            example: "1234567890"
  code:
    description: "The category of test result. Describes COVID-19 detection method."
    type: object
    required:
      - coding
    properties:
      coding:
        description: Wrapper for the test result detection method.
        type: array
        minItems: 1
        maxItems: 1
        items:
          type: object
          required:
            - system
            - code
            - display
          properties:
            system:
              description: Coding system used to describe COVID-19 detection method. Always SNOMED.
              type: string
              example: "http://snomed.info/sct"
            code:
              description: Code for the COVID-19 detection method.
              type: string
              example: "871555000"
              enum:
                - "871555000"
                - "871552002"
                - "871553007"
            display:
              description: Description of the COVID-19 detection method.
              type: string
              example: "Detection of ribonucleic acid of Severe acute respiratory syndrome coronavirus 2"
  effectiveDateTime: 
    description: Date and time of the COVID-19 test.
    type: string
    example: "2021-04-20T00:00:00.0000000Z"
  valueCodeableConcept:
    description: The COVID-19 test result for the specimen analysed.
    type: object
    required:
      - coding
    properties:
      coding:
        description: Wrapper for the test result.
        type: array
        minItems: 1
        maxItems: 1
        items:
          type: object
          required:
            - system
            - code
            - display
          properties:
            system:
              description: Coding system used to describe COVID-19 test result. Always SNOMED.
              type: string
              example: "http://snomed.info/sct"
            code:
              description: Code for the COVID-19 test result.
              type: string
              example: "1322791000000100"
            display:
              description: Description of the COVID-19 test result.
              type: string
              example: "SARS-CoV-2 (severe acute respiratory syndrome coronavirus 2) antigen detection result negative"
  device:
    description: The type of test kit used to take the COVID-19 test.
    type: object
    required:
      - identifier
      - display
    properties:
      identifier:
        description: Test kit identifier.
        type: object
        required:
          - system
          - value
        properties:
          system:
            description: Coding system used for the test kit identifier. Always `https://fhir.nhs.uk/Id/Covid19-TestKit`.
            type: string
            example: https://fhir.nhs.uk/Id/Covid19-TestKit
          value:
            description: Test kit code.
            type: string
            enum:
              - blank (i.e. empty)
              - lampore
              - rnalamp
              - directrtlamp
              - lft
              - ePCR
              - rtPCR
              - elisa
            example: lampore
      display:
        description: Decsription of the test kit.
        type: string
        example: Lateral Flow Test
  performer:
    description: Information where the test was taken (Test Centre) and where it was analysed (e.g. a laboratory).
    type: array
    minItems: 1
    maxItems: 2
    items:
      oneOf:
        - $ref: 'lab-schema.yaml'
        - $ref: 'testing-centre-schema.yaml'
  extension:
    $ref: 'c19-extension.yaml'